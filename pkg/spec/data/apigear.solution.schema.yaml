$schema: "http://json-schema.org/draft-07/schema#"
title: "ApiGear Solution 1.0 Schema"
type: object
additionalProperties: false
properties:
  schema:
    type: string
    enum: ["apigear.solution/1.0"]
    description: "The ApiGear Solution specification version of this document."
  name: { type: string }
  version: { type: string }
  description: { type: string }
  rootDir: { type: string }
  meta: { type: object }
  layers: # array of layers
    type: array
    items: # each interface is and object with at least a name
      $ref: "#/definitions/Layer"
definitions:
  Layer:
    type: object
    required: [name, output, template, modules]
    additionalProperties: false
    properties:
      name: { type: string }
      description: { type: string }
      meta: { type: object }
      rootDir: { type: string }
      output: { type: string }
      modules: { type: array, items: { type: string } }
      template: # factory used in this layer
        $ref: "#/definitions/Template"
  Template:
    type: object
    additionalProperties: false
    properties:
      name: { type: string }
      package: { type: string }
      description: { type: string }
      meta: { type: object }
      rules: { type: string }
      searchPath: { type: string }
      features: { type: array, items: { type: string } }
      dryRun: { type: boolean }
      force: { type: boolean }
